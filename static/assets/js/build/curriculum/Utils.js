define(["react","core_light","hogan"],function(e,r,t){var o;return{itemDraggable:function(e,t,o,s,a){var i=document.querySelector("."+o),n=document.querySelector(".movable-clones");n||(n=document.createElement("div"),n.className="movable-clones",document.body.insertBefore(n,document.body.firstChild)),r.$.addListener(e,"mousedown",function(c){function l(t){r.$.addClass(g,"draggable-shadow");var s=document.querySelector(".draggable-shadow");s.style.top=t.pageY+f-v+"px",s.style.left=t.pageX+b-h+20+"px",r.$.removeClass(i,"accepting"),y=r.$.parents(t.target,o),y&&(y.contains(e)||y&&r.$.addClass(y,"accepting"))}function u(){r.$.removeClass(g,"draggable-shadow"),x=document.querySelector("."+o+".accepting"),x&&a(x),g.parentNode.removeChild(g),$.removeEventListener("mousemove",l),$.removeEventListener("mouseup",u),r.$.removeClass(w,"accepting"),r.$.removeClass(i,"accepting")}var d=c.target,p=document.createElement("div");p.innerHTML=s,p.className="movable-clone",n.appendChild(p);var m=document.querySelectorAll(".movable-clones div.movable-clone"),g=m[m.length-1];g.style.top=d.offsetTop+"px",g.style.left=d.offsetLeft+"px",r.$.addClass(g,"float");var v=r.$.outerHeight(c.target),h=r.$.outerHeight(c.target),f=c.target.offsetTop+v-c.pageY,b=c.target.offsetLeft+h-c.pageX,w=r.$.parents(d,t);r.$.addClass(w,"accepting");var y,x,$=r.$.parents(c.target,"content-panel-wrapper");r.$.addListener(r.$.addListener($,"mousemove",l),"mouseup",u),c.preventDefault()})},clearStatusFocus:function(){$(".light-popup-background").removeClass("show-popup-background")},metaTitles:{methodology:"Methodology",how:"The 'How'",wordwall:"Word Wall Must Haves",prerequisites:"Pre-requisites",ccss:"Common Core State Standards",content:"Standards for Mathematical Content",practices:"Standards for Mathematical Practice","big-idea":"Big Idea","essential-understandings":"Enduring Understandings","language-objectives-supports":"Language Objectives and Supports"},metaOrder:["methodology","how","wordwall","prerequisite"],suggestionTemplate:e.createClass({render:function(){return e.DOM.div({className:"explorer-suggest-resources-listing-item",id:"resource-"+this.props.id},[e.DOM.div({className:"explorer-suggest-resources-listing-item-thumbnail",style:{backgroundImage:"url('"+this.props.thumbnail+"')"}}),e.DOM.div({className:"explorer-suggest-resources-listing-item-content"},[e.DOM.a({className:"explorer-suggest-resources-listing-item-content-title",target:"_blank",href:this.props.url},this.props.title),e.DOM.div({className:"explorer-suggest-resources-listing-item-content"},this.props.description)]),e.DOM.div({className:"explorer-suggest-resources-listing-item-actions"},[e.DOM.button({className:"action-button explorer-suggest-resources-listing-item-action-keep"},"Keep"),e.DOM.button({className:"action-button secondary-button explorer-suggest-resources-listing-item-action-hide"},"Hide")])])}}),cachedResources:[],openResourcePreview:function(e,s,a,i,n){function c(){r.$.removeClass(document.querySelector(".popup-background"),"show-popup-background"),r.$.removeClass(p,"show")}function l(){require(["atomic"],function(t){t.get("/curriculum/api/favorite/"+e+"/").success(function(){r.$.toggleClass(m,"favorited")})})}function u(){m.removeEventListener("click",l),r.$.addListener(m,"click",l)}function d(e){document.querySelector(".explorer-resource-header-title").innerHTML=s,document.querySelector(".explorer-resource-header-thumbnail").style.backgroundImage="url('"+a+"')",document.querySelector(".explorer-resource-actions-open").href=i,g.innerHTML=e,r.$.addClass(g,"show"),r.$.addClass(document.querySelector(".explorer-resource-preview"),"show"),u()}var p=document.querySelector(".explorer-resource-preview-wrapper"),m=document.querySelector(".explorer-resource-actions-favorite"),g=document.querySelector(".explorer-resource-body");if(r.$.addClass(document.querySelector(".popup-background"),"show-popup-background"),r.$.addClass(p,"show"),o)o.spin(p);else{var v={lines:15,length:6,width:3,radius:8,corners:.9,rotate:75,direction:1,color:"#fff",speed:1,trail:79,shadow:!1,hwaccel:!1,className:"spinner",zIndex:12,top:"50%",left:"50%"};require(["spin"],function(e){o=new e(v).spin(p)});var h,f=document.querySelectorAll(".explorer-resource-actions div, a");for(h=0;h<f.length;h++)r.utils.tip(f[h])}g.innerHTML="";var b=t.compile('<div class="reference-preview-wrapper"><div class="reference-preview-thumbnail" style="background-image: url(\'{{thumbnail}}\');"></div><div class="reference-preview-contents"><h2>{{textbook_title}}</h2><h3>Chapter {{chapter}}: {{title}}</h3><h3>Section {{section}}</h3><p>No digital preview available.</p></div></div>'),w=t.compile('<div class="reference-preview-wrapper"><div class="reference-preview-thumbnail" style="background-image: url(\'{{thumbnail}}\');"></div><div class="reference-preview-contents"><h2>{{textbook_title}}</h2><h3>Pages: {{begin}} - {{end}}</h3><p>No digital preview available.</p></div></div>'),y=function(e){return excerpts=_.reduce(e.excerpts,function(e,r){return e?e+", "+r:r}),e._excerpts=excerpts,t.compile('<div class="reference-preview-wrapper"><div class="reference-preview-thumbnail" style="background-image: url(\'{{thumbnail}}\');"></div><div class="reference-preview-contents"><h2>{{textbook_title}}</h2><h3>{{_excerpts}}</h3><p>No digital preview available.</p></div></div>')(e)},x=(t.compile('<div class="reference-preview-wrapper"><div class="reference-preview-thumbnail" style="background-image: url(\'{{thumbnail}}\');"></div><div class="reference-preview-contents"><h2>{{textbook_title}}</h2><h3>{{excerpt}}</h3><p>No digital preview available.</p></div></div>'),document.querySelector(".explorer-resource-contents"));"reference"==n?require(["atomic"],function(t){t.get("/curriculum/api/reference/"+e+"/").success(function(e){o&&o.stop(),"chapter-section"==e.type&&d(b.render(e)),"pages"==e.type&&d(w.render(e)),"excerpts"==e.type&&d(y.render(e)),"excerpt"==e.type&&d(y.render(e)),r.$.removeClass(x,"foreign-resource"),r.$.addClass(x,"reference-resource")})}):require(["atomic"],function(t){t.get("/curriculum/api/resource-view/"+e+"/").success(function(e){o&&o.stop(),"pdf"==n&&(r.config.pdfjs=!0,r.$.addClass(g,"pdf")),r.$.removeClass(x,"reference-resource"),r.$.addClass(x,"foreign-resource"),d(e),"document"==n&&require(["mathjax"],function(e){e.Hub.Queue(["Typeset",e.Hub,"document-body"])})})});var $=document.querySelector(".explorer-resource-actions-close");$.removeEventListener("click",c),r.$.addListener($,"click",c),r.$.addListener(document,"keyup",function(e){p.hasClass("show")&&27==e.which&&c()})}}});